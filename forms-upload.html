<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Instagram Example | Vulcan Docs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.ico" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://docs.vulcanjs.org">
    <meta property="og:title" content="Instagram Example | Vulcan Docs">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@telescopeapp">
    <meta name="twitter:title" content="Instagram Example | Vulcan Docs">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/style/style.css">
  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="http://docs.vulcanjs.org/" title="Vulcan Documentation Vulcan Documentation"  >
        <img src="/images/vulcan-logo-border-2.svg" alt="Vulcan Documentation" class="logo"/>
        <span>Vulcan Documentation</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://github.com/telescopejs/telescope"  >
          <span>GitHub</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://slack.telescopeapp.org"  >
          <span>Slack</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="http://docs.vulcanjs.org/" title="Vulcan Documentation"  >
        <span>Vulcan Documentation Vulcan Documentation</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="https://github.com/telescopejs/telescope"  >
          <span>GitHub</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://slack.telescopeapp.org"  >
          <span>Slack</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      
    </div>

    

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Overview</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="features.html" class="sidebar-link ">
                  <span>Features</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="architecture.html" class="sidebar-link ">
                  <span>Architecture</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="vulcan.html" class="sidebar-link ">
                  <span>From Telescope to Vulcan</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="packages.html" class="sidebar-link ">
                  <span>Packages</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Data Layer</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="schemas.html" class="sidebar-link ">
                  <span>Collections & Schemas</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="data-loading.html" class="sidebar-link ">
                  <span>Data Loading</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="terms-parameters.html" class="sidebar-link ">
                  <span>Terms & Parameters</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">API</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="theming.html" class="sidebar-link ">
                  <span>Components & Theming</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms.html" class="sidebar-link ">
                  <span>Forms</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="callbacks.html" class="sidebar-link ">
                  <span>Callbacks</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="email.html" class="sidebar-link ">
                  <span>Email</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="users.html" class="sidebar-link ">
                  <span>Users</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="groups-permissions.html" class="sidebar-link ">
                  <span>Groups & Permissions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="routing.html" class="sidebar-link ">
                  <span>Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="internationalization.html" class="sidebar-link ">
                  <span>Internationalization</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="settings.html" class="sidebar-link ">
                  <span>Settings</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Packages</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="newsletter.html" class="sidebar-link ">
                  <span>Newsletter</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Examples</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="example-movies.html" class="sidebar-link ">
                  <span>Movies Example</span>
                </a>
              </li>
            
              
              <li class="item-toc  current">
                <a href="example-instagram.html" class="sidebar-link  current">
                  <span>Instagram Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-forum.html" class="sidebar-link ">
                  <span>Forum Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-customization.html" class="sidebar-link ">
                  <span>Customization Example</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Tutorials</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="deployment.html" class="sidebar-link ">
                  <span>Deployment Guide</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="migration.html" class="sidebar-link ">
                  <span>Migration Guide</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Resources</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="learn.html" class="sidebar-link ">
                  <span>Learn More</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="examples.html" class="sidebar-link ">
                  <span>Examples</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="debugging.html" class="sidebar-link ">
                  <span>Debugging</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="plugins.html" class="sidebar-link ">
                  <span>Plugins</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="themes.html" class="sidebar-link ">
                  <span>Themes</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="tutorials.html" class="sidebar-link ">
                  <span>Tutorials</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="videos.html" class="sidebar-link ">
                  <span>Videos</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Instagram Example</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/telescopejs/nova-docs/tree/master/source/forms-upload.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <p>This is a Vulcan package extending <code>vulcan:forms</code> to upload images to Cloudinary from a drop zone.</p>
<p><img src="https://res.cloudinary.com/xavcz/image/upload/v1471534203/Capture_d_e%CC%81cran_2016-08-17_14.22.14_ehwv0d.png" alt="Screenshot"></p>
<p>Want to add this to your Vulcan instance? Read below:</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h3 id="1-Meteor-package"><a href="#1-Meteor-package" class="headerlink" title="1. Meteor package"></a>1. Meteor package</h3><p>I would recommend that you clone this repo in your vulcan‚Äôs <code>/packages</code> folder.</p>
<p>Then, open the <code>.meteor/packages</code> file and add at the end of the <strong>Optional packages</strong> section:<br><code>xavcz:nova-forms-upload</code> </p>
<blockquote>
<p><strong>Note:</strong> This is the version for Nova 1.0.0, running with GraphQL. <em>If you are looking for a version compatible with Nova ‚Äúclassic‚Äù, you‚Äôll need to change the package‚Äôs branch, like below. Then, refer to <a href="https://github.com/xavcz/nova-forms-upload/blob/nova-classic/README.md#installation" target="_blank" rel="external">the README for <code>nova-forms-upload</code> on Nova Classic</a></em></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># only for Nova classic users (v0.27.5)</span></span><br><span class="line"><span class="built_in">cd</span> nova-forms-upload</span><br><span class="line">git checkout nova-classic</span><br></pre></td></tr></table></figure>
<h3 id="2-NPM-dependency"><a href="#2-NPM-dependency" class="headerlink" title="2. NPM dependency"></a>2. NPM dependency</h3><p>This package depends on the awesome <code>react-dropzone</code> (<a href="https://github.com/okonet/react-dropzone" target="_blank" rel="external">repo</a>), you need to install the dependency:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> react-dropzone isomorphic-<span class="keyword">fetch</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3-Cloudinary-account"><a href="#3-Cloudinary-account" class="headerlink" title="3. Cloudinary account"></a>3. Cloudinary account</h3><p>Create a <a href="https://cloudinary.com" target="_blank" rel="external">Cloudinary account</a> if you don‚Äôt have one.</p>
<p>The upload to Cloudinary relies on <strong>unsigned upload</strong>:</p>
<blockquote>
<p>Unsigned upload is an option for performing upload directly from a browser or mobile application with no authentication signature, and without going through your servers at all. However, for security reasons, not all upload parameters can be specified directly when performing unsigned upload calls.</p>
</blockquote>
<p>Unsigned upload options are controlled by <a href="http://cloudinary.com/documentation/upload_images#upload_presets" target="_blank" rel="external">an upload preset</a>, so in order to use this feature you first need to enable unsigned uploading for your Cloudinary account from the <a href="https://cloudinary.com/console/settings/upload" target="_blank" rel="external">Upload Settings</a> page.</p>
<p>When creating your <strong>preset</strong>, you can define image transformations. I recommend to set something like 200px width &amp; height, fill mode and auto quality. Once created, you will get a preset id.</p>
<p>It may look like this:</p>
<p><img src="https://res.cloudinary.com/xavcz/image/upload/v1471534183/Capture_d_e%CC%81cran_2016-08-18_17.07.52_tr9uoh.png" alt="Screenshot-Cloudinary"></p>
<h3 id="4-Nova-Settings"><a href="#4-Nova-Settings" class="headerlink" title="4. Nova Settings"></a>4. Nova Settings</h3><p>Edit your <code>settings.json</code> and add inside the <code>public: { ... }</code> block the following entries with your own credentials:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public: &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  "cloudinaryCloudName": "YOUR_APP_NAME",</span><br><span class="line">  "cloudinaryPresets": &#123;</span><br><span class="line">    "avatar": "YOUR_PRESET_ID",</span><br><span class="line">    "posts": "THE_SAME_OR_ANOTHER_PRESET_ID"</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Picture upload in Nova is now enabled! Easy-peasy, right? üëØ</p>
<h3 id="5-Your-custom-package-amp-custom-fields"><a href="#5-Your-custom-package-amp-custom-fields" class="headerlink" title="5. Your custom package &amp; custom fields"></a>5. Your custom package &amp; custom fields</h3><p>Make your custom package depends on this package: open <code>package.js</code> in your custom package and add <code>xavcz:nova-forms-upload</code> as a dependency, near by the other <code>nova:xxx</code> packages.</p>
<p>You can now use the <code>Upload</code> component as a classic form extension with <a href="https://www.youtube.com/watch?v=1yTT48xaSy8" target="_blank" rel="external">custom fields</a> like <code>nova:forms-tags</code> or <code>nova:embedly</code>.</p>
<p><strong>‚ö†Ô∏è Note:</strong> Don‚Äôt forget to update your query fragments wherever needed after defining your custom fields, else they will never be available!</p>
<h2 id="Image-for-posts"><a href="#Image-for-posts" class="headerlink" title="Image for posts"></a>Image for posts</h2><p>Let‚Äôs say you want to enhance your posts with a custom image. In your custom package, your new custom field could look like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ... your imports</span></span><br><span class="line"><span class="keyword">import</span> &#123; getComponent, getSetting &#125; <span class="keyword">from</span> <span class="string">'meteor/nova:lib'</span>;</span><br><span class="line"><span class="keyword">import</span> Posts <span class="keyword">from</span> <span class="string">'meteor/nova:posts'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// extends Posts schema with a new field: 'image' üèñ</span></span><br><span class="line">Posts.addField(&#123;</span><br><span class="line">  <span class="attr">fieldName</span>: <span class="string">'image'</span>,</span><br><span class="line">  <span class="attr">fieldSchema</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">optional</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">control</span>: getComponent(<span class="string">'Upload'</span>),</span><br><span class="line">    <span class="attr">insertableBy</span>: [<span class="string">'members'</span>],</span><br><span class="line">    <span class="attr">editableBy</span>: [<span class="string">'members'</span>],</span><br><span class="line">    <span class="attr">viewableBy</span>: [<span class="string">'guests'</span>],</span><br><span class="line">    <span class="attr">form</span>: &#123;</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">preset</span>: getSetting(<span class="string">'cloudinaryPresets'</span>).posts <span class="comment">// this setting refers to the transformation you want to apply to the image</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Avatar-for-users"><a href="#Avatar-for-users" class="headerlink" title="Avatar for users"></a>Avatar for users</h2><p>Let‚Äôs say you want to enable your users to upload their own avatar. In your custom package, your new custom field could look like this:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ... your imports</span></span><br><span class="line"><span class="keyword">import</span> &#123; getComponent, getSetting &#125; <span class="keyword">from</span> <span class="string">'meteor/nova:lib'</span>;</span><br><span class="line"><span class="keyword">import</span> Users <span class="keyword">from</span> <span class="string">'meteor/nova:users'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// extends Users schema with a new field: 'avatar' üëÅ</span></span><br><span class="line">Users.addField(&#123;</span><br><span class="line">  <span class="attr">fieldName</span>: <span class="string">'avatar'</span>,</span><br><span class="line">  <span class="attr">fieldSchema</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">optional</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">control</span>: getComponent(<span class="string">'Upload'</span>),</span><br><span class="line">    <span class="attr">insertableBy</span>: [<span class="string">'members'</span>],</span><br><span class="line">    <span class="attr">editableBy</span>: [<span class="string">'members'</span>],</span><br><span class="line">    <span class="attr">viewableBy</span>: [<span class="string">'guests'</span>],</span><br><span class="line">    <span class="attr">preload</span>: <span class="literal">true</span>, <span class="comment">// ‚ö†Ô∏è will preload the field for the current user!</span></span><br><span class="line">    form: &#123;</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">preset</span>: getSetting(<span class="string">'cloudinaryPresets'</span>).avatar <span class="comment">// this setting refers to the transformation you want to apply to the image</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>Adding the opportunity to upload an avatar comes with a trade-off: you also need to extend the behavior of the <code>Users.avatar</code> methods. You can do this by adding this snippet, in <code>custom_fields.js</code> for instance:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> originalAvatarConstructor = Users.avatar;</span><br><span class="line"></span><br><span class="line"><span class="comment">// extends the Users.avatar function</span></span><br><span class="line">Users.avatar = &#123;</span><br><span class="line">  ...originalAvatarConstructor,</span><br><span class="line">  getUrl(user) &#123;</span><br><span class="line">    url = originalAvatarConstructor.getUrl(user);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> !!user &amp;&amp; user.avatar ? user.avatar : url;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Now, you also need to update the query fragments related to <code>User</code> when you want the custom avatar to show up :)</p>
<h2 id="S3-Google-Cloud"><a href="#S3-Google-Cloud" class="headerlink" title="S3? Google Cloud?"></a>S3? Google Cloud?</h2><p>Feel free to contribute to add new features and flexibility to this package :)</p>
<p>You are welcome to come chat about it <a href="http://slack.telescopeapp.org" target="_blank" rel="external">on the Nova Slack chatroom</a></p>
<h2 id="What-about-nova-cloudinary"><a href="#What-about-nova-cloudinary" class="headerlink" title="What about nova:cloudinary ?"></a>What about <code>nova:cloudinary</code> ?</h2><p>This package and <code>nova:cloudinary</code> share a settings in common: <code>cloudinaryCloudName</code>. They are fully compatible.</p>
<p>Happy hacking! üöÄ</p>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev"
          href="example-movies.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Movies Example
        </a>
      
      
        <a class="link primary next"
          href="example-forum.html">
          <span class="subtitle-pagination">Next</span>
          Forum Example
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/telescopejs/nova-docs/tree/master/source/forms-upload.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>


    <script>
      
    </script>
  </body>
</html>
